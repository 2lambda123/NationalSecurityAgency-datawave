<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.1" xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="
            http://xmlns.jcp.org/xml/ns/javaee
            http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd">
    <display-name>Query HUD</display-name>

    <security-constraint>
        <!--  some browsers, like Firefox, will not send SSL certs on the preflight request.  This breaks CORS
               in those browsers, so we need to open up the OPTIONS calls.  This is only exposing
               the documented endpoints  -->
        <web-resource-collection>
            <web-resource-name>UnauthenticatedOps</web-resource-name>
            <description>Allow unauthenticated users to access OPTIONS calls for CORS preflight</description>
            <url-pattern>/*</url-pattern>
            <http-method>OPTIONS</http-method>
        </web-resource-collection>
        <!-- transport-guarantee of NONE ensures we don't attempt any authentication on this request and don't
             look for a client certificate that won't be there -->
        <user-data-constraint>
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>HtmlAdaptor</web-resource-name>
            <description>A security config that only allows users with the
                role Administrator to access the this web application
            </description>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>Administrator</role-name>
        </auth-constraint>
        <!--
         Define the transport guarantee for this webapp. Note that this value is not substituted at compile
         time, but instead will be substituted at runtime by the container.
        -->
        <user-data-constraint>
            <transport-guarantee>${dw.transport.guarantee}</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <login-config>
        <auth-method>DATAWAVE-AUTH</auth-method>
        <realm-name>DATAWAVE Web Services</realm-name>
    </login-config>

    <security-role>
        <role-name>Administrator</role-name>
    </security-role>

</web-app>
