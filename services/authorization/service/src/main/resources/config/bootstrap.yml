spring:
  application:
    name: authorization
  cloud:
    # Disable discovery by default. We'll turn it back on in the consul profile if that profile is enabled.
    discovery:
      enabled: false
    config:
      # Disable consul-first config by default. We'll turn it back on in the consul profile if that profile is enabled.
      discovery:
        enabled: false
      # Always fail fast so we can retry if the config server is no up yet
      failFast: true
      # Give the config server time to start up if it hasn't already
      retry:
        max-attempts: 60

---

# For the dev profile, check localhost for the config server by default and don't use the AMQP bus
spring:
  profiles: 'dev'
  cloud:
    config:
      uri: ${CONFIG_SERVER_URL:http://localhost:8888}
    bus:
      enabled: false

---

spring:
  profiles: 'consul'
  cloud:
    discovery:
      enabled: true
    config:
      # Use Consul to locate the configuration server and bootstrap app config.
      discovery:
        enabled: true
      # Give the config server a long time to come up and regiser itself in Consul
      retry:
        max-attempts: 120